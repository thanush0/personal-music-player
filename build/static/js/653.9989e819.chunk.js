"use strict";(self.webpackChunkpersonal_music_player=self.webpackChunkpersonal_music_player||[]).push([[653],{83390:(e,t,l)=>{l.d(t,{Ay:()=>a,eR:()=>o});var s=l(67818),i=l(9950),n=l(33767),r=l(44414);const a=(0,i.memo)((e=>{const{view:t,fields:l}=e,s="LIST"===t;return(0,r.jsx)("div",{style:{color:"#bababa"},className:"mobile-hidden flex justify-between items-center py-2",children:l.map(((e,t)=>(0,r.jsx)(e,{isList:s},t)))})})),o={Index:e=>(0,r.jsx)("div",{style:{flex:1},children:(0,r.jsx)("h3",{className:"column-name text-center",children:"#"})}),Title:e=>{const{t:t}=(0,s.Bd)(["playlist"]);return(0,r.jsx)("div",{style:{flex:8},children:(0,r.jsx)("h3",{className:"column-name text-left",children:t("Title")})})},Artists:e=>{const{isList:t}=e,{t:l}=(0,s.Bd)(["playlist"]);return t?null:(0,r.jsx)("div",{style:{flex:5},className:"tablet-hidden",children:(0,r.jsx)("h3",{className:"column-name text-left",children:l("Artist")})})},Time:e=>(0,r.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)("h3",{style:{marginRight:10,textAlign:"right"},children:(0,r.jsx)(n.zD,{})})}),Space:e=>(0,r.jsx)("div",{style:{flex:1},className:"tablet-hidden"}),Album:e=>{const{t:t}=(0,s.Bd)(["playlist"]);return(0,r.jsx)("div",{style:{flex:5},children:(0,r.jsx)("h3",{className:"column-name tablet-hidden text-left",children:t("Album")})})},DateAdded:e=>{const{t:t}=(0,s.Bd)(["playlist"]);return(0,r.jsx)("div",{style:{flex:3},children:(0,r.jsx)("h3",{className:"column-name tablet-hidden text-left",children:t("Date Added")})})}}},30797:(e,t,l)=>{l.d(t,{Ay:()=>N,jh:()=>C});var s=l(89379),i=l(22748),n=l(13417),r=l(9950),a=l(33767),o=l(73028),c=l(17858),d=l(67818),u=l(28472),x=l(92994),h=l(53455),f=l(23726),m=l(28504),p=l(2287),v=l(22567),j=l(50411),g=l(26359),y=l(44414);const b=e=>e.slice(0,3).map(((t,l)=>(0,y.jsxs)("span",{children:[(0,y.jsx)(f.k,{artist:t,trigger:["contextMenu"],children:(0,y.jsx)(x.N_,{to:"/artist/".concat(t.id),style:{cursor:"pointer"},children:t.name},t.id)}),l<e.slice(0,3).length-1?", ":""]},t.id))),A=e=>{var t,l,s,i,n;let{song:r,isList:a}=e;if(!a)return null;return(null===(t=((null===r||void 0===r||null===(l=r.album)||void 0===l?void 0:l.images)||[])[0])||void 0===t?void 0:t.url)?(0,y.jsx)("img",{alt:"song cover",src:(null===(s=r.album)||void 0===s||null===(i=s.images)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.url)||"/images/playlist.png",className:"w-10 h-10 mr-4 rounded-md"}):null},w=e=>{let{index:t,isCurrent:l,isPlaying:s,onClick:i}=e;return(0,y.jsxs)("div",{style:{flex:1},className:"mobile-hidden",children:[(0,y.jsx)("p",{className:"song-details-index",children:l&&s?(0,y.jsx)("img",{alt:"equaliser",style:{height:10,margin:"0 auto"},src:j.GD}):(0,y.jsx)("span",{style:{margin:"0 auto"},children:t+1})}),(0,y.jsx)("button",{className:"song-details-play",onClick:i,children:l&&s?(0,y.jsx)(a.vR,{}):(0,y.jsx)(a.jG,{})})]})},N=e=>{var t;const{size:l="normal"}=e,{view:i,song:n,index:a,context:c,artist:d,playlist:x,canEdit:f,fields:m,album:p}=e,j=(0,v.A)(),b=(0,u.useAppDispatch)(),A=(0,u.useAppSelector)((e=>!!e.auth.user)),N=(0,u.useAppSelector)((e=>{var t;return!(null===(t=e.spotify.state)||void 0===t||!t.paused)})),C=(0,u.useAppSelector)((e=>{var t;return null===(t=e.spotify.state)||void 0===t?void 0:t.track_window.current_track}),((e,t)=>(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id))),k=(0,r.useMemo)((()=>(null===C||void 0===C?void 0:C.uri)===n.uri),[C,n]),S="LIST"===(j?"LIST":i),T=(0,r.useCallback)((()=>A?k&&N?h.D.pausePlayback():k?h.D.startPlayback():h.D.startPlayback(c):b(g.e5.openLoginModal(n.album.images[0].url))),[A,k,N,c,b,null===(t=n.album)||void 0===t?void 0:t.images]);return(0,y.jsx)(o.C,{track:n,album:p,artist:d,canEdit:f,playlist:x,trigger:["contextMenu"],saved:e.onToggleLike?e.saved:void 0,onSavedToggle:e.onToggleLike?e.onToggleLike:void 0,children:(0,y.jsx)("button",{onClick:j?T:void 0,onDoubleClick:j?void 0:T,className:"flex flex-col w-full hover:bg-spotify-gray-lightest items-center ".concat("normal"===l?"p-2":""," rounded-lg ").concat(e.activable?"activable-song":""),children:(0,y.jsx)("div",{className:"song-details flex flex-row items-center w-full",children:(0,y.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[void 0!==a?(0,y.jsx)(w,{index:a,isCurrent:k,isPlaying:N,onClick:T}):null,m.map(((t,l)=>(0,y.jsx)(t,(0,s.A)({isList:S,onPlay:T,isCurrent:k,isPlaying:N},e),l)))]})})})},n.id)},C={Title:e=>{const{song:t,isList:l,isCurrent:s}=e;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"flex flex-col",style:{flex:8},children:(0,y.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,y.jsx)("div",{className:"flex flex-row items-center",children:(0,y.jsxs)("p",{className:"title text-left ".concat(s?"active":""),children:[(0,y.jsx)("span",{children:t.name})," ",t.explicit&&!l?(0,y.jsx)("span",{className:"explicit",children:"E"}):null]})}),l?(0,y.jsxs)("p",{className:"text-left artist mobile-hidden",children:[t.explicit?(0,y.jsx)("span",{className:"explicit",children:"E"}):null,b(t.artists)]}):null]})})})})},ClickeableCover:e=>{var t,l;const{song:s,onPlay:i,isCurrent:n,isPlaying:r}=e,o=(0,y.jsx)("button",{className:"image-button",onClick:i,children:r&&n?(0,y.jsx)(a.vR,{}):(0,y.jsx)(a.jG,{})}),c=null===(t=((null===s||void 0===s||null===(l=s.album)||void 0===l?void 0:l.images)||[])[0])||void 0===t?void 0:t.url;return c?(0,y.jsx)("div",{className:"image p-2 h-full items-center",children:(0,y.jsxs)("div",{style:{position:"relative"},children:[(0,y.jsx)("div",{children:(0,y.jsx)("img",{src:c,alt:s.album.name,className:"rounded-md",style:{width:40,height:40}})}),o]})}):null},TitleWithCover:e=>{const{song:t,isList:l,isCurrent:i}=e;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"flex flex-col",style:{flex:8},children:(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,y.jsx)(A,(0,s.A)({},e)),(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,y.jsx)("div",{className:"flex flex-row items-center",children:(0,y.jsxs)("p",{className:"title text-left ".concat(i?"active":""),children:[(0,y.jsx)("span",{children:t.name})," ",t.explicit&&!l?(0,y.jsx)("span",{className:"explicit",children:"E"}):null]})}),l?(0,y.jsxs)("p",{className:"text-left artist mobile-hidden",children:[t.explicit?(0,y.jsx)("span",{className:"explicit",children:"E"}):null,(0,y.jsx)("div",{children:b(t.artists)})]}):null]})]})})})},Artists:e=>{let{song:t,isList:l}=e;return l?null:(0,y.jsx)("p",{className:"text-left tablet-hidden",style:{flex:5},children:b(t.artists)})},Cover:A,Album:e=>{let{song:t}=e;const l=(0,x.Zp)(),s=(0,u.useAppDispatch)(),i=(0,u.useAppSelector)((e=>!!e.auth.user)),n=(0,r.useCallback)((e=>{if(e&&e.stopPropagation(),e&&e.preventDefault(),!i)return s(g.e5.openLoginModal(t.album.images[0].url));l("/album/".concat(t.album.id))}),[i,l,t.album.id,t.album.images,s]);return(0,y.jsx)("p",{className:"text-left tablet-hidden",style:{flex:5},children:(0,y.jsx)(x.N_,{to:"/album/".concat(t.album.id),onClick:n,children:t.album.name})})},AddedAt:e=>{let{addedAt:t}=e;const l=(0,u.useAppSelector)((e=>e.language.language));return t?(0,y.jsx)("p",{className:"text-left tablet-hidden",style:{flex:3},children:(0,y.jsx)(n.A,{date:new Date(t),locale:"es"===l?"es-AR":void 0})}):null},AddToLiked:e=>{let{song:t,saved:l,onLikeRefresh:s}=e;const i=(0,u.useAppDispatch)(),n=(0,u.useAppSelector)((e=>{var t;return null===(t=e.spotify.state)||void 0===t?void 0:t.track_window.current_track.id}));return(0,y.jsx)("p",{className:"text-right tablet-hidden",style:{flex:1,display:"flex",justifyContent:"end"},children:(0,y.jsx)(m.$,{size:18,id:t.id,isSaved:!!l,onToggle:()=>{s&&s(t.id),n===t.id&&i(p.gj.setLiked({liked:!l}))}})})},Actions:e=>{let{song:t}=e;const[l]=(0,d.Bd)(["order"]);return(0,y.jsx)("p",{className:"text-right actions tablet-hidden",style:{flex:1,display:"flex",justifyContent:"center"},children:(0,y.jsx)(o.C,{track:t,trigger:["click"],children:(0,y.jsx)("div",{children:(0,y.jsx)(i.A,{title:"".concat(l("More options for")," ").concat(t.name),children:(0,y.jsx)("div",{children:(0,y.jsx)(a.ZB,{})})})})})})},Time:e=>{let{song:t}=e;return(0,y.jsx)("p",{className:"text-right ",style:{flex:1,display:"flex",justifyContent:"end"},children:(0,c.n)(t.duration_ms)})}}},67653:(e,t,l)=>{l.r(t),l.d(t,{ProfileSongsPage:()=>B,default:()=>M});var s=l(89379),i=l(9950),n=l(87094),r=l(41988),a=l(30797),o=l(23464),c=l(28472),d=l(44414);const u=e=>{const{song:t,index:l}=e,n=(0,c.useAppDispatch)(),r=(0,c.useAppSelector)((e=>e.profile.songs)),u=(0,i.useMemo)((()=>null===r||void 0===r?void 0:r.slice(l).map((e=>e.uri))),[r,l]),x=(0,i.useCallback)((()=>{n(o.h.setLinkedStateForTrack({id:t.id,saved:!t.saved}))}),[n,t.saved,t.id]);return(0,d.jsx)(a.Ay,{activable:!0,song:t,view:"LIST",index:l,saved:t.saved,context:{uris:u},onToggleLike:x,fields:[a.jh.TitleWithCover,a.jh.Artists,a.jh.Album,a.jh.AddedAt,e=>(0,d.jsx)(a.jh.AddToLiked,(0,s.A)((0,s.A)({},e),{},{onLikeRefresh:x})),a.jh.Time,a.jh.Actions]})};var x=l(48738),h=l.n(x),f=l(77090),m=l(60436),p=l(7261);const v=function(e){let t=null;const l=function(){if(null===t){for(var l=arguments.length,s=new Array(l),i=0;i<l;i++)s[i]=arguments[i];t=(0,p.A)((l=>()=>{t=null,e.apply(void 0,(0,m.A)(l))})(s))}};return l.cancel=()=>{p.A.cancel(t),t=null},l};var j=l(5741);const g=(0,l(31900).OF)("Affix",(e=>{const{componentCls:t}=e;return{[t]:{position:"fixed",zIndex:e.zIndexPopup}}}),(e=>({zIndexPopup:e.zIndexBase+10})));function y(e){return e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight}}function b(e,t,l){if(void 0!==l&&Math.round(t.top)>Math.round(e.top)-l)return l+t.top}function A(e,t,l){if(void 0!==l&&Math.round(t.bottom)<Math.round(e.bottom)+l){return l+(window.innerHeight-t.bottom)}}var w=function(e,t){var l={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(l[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(l[s[i]]=e[s[i]])}return l};const N=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"];function C(){return"undefined"!==typeof window?window:null}const k=i.forwardRef(((e,t)=>{var l;const{style:s,offsetTop:n,offsetBottom:r,prefixCls:a,className:o,rootClassName:c,children:d,target:u,onChange:x,onTestUpdatePosition:m}=e,p=w(e,["style","offsetTop","offsetBottom","prefixCls","className","rootClassName","children","target","onChange","onTestUpdatePosition"]),{getPrefixCls:k,getTargetContainer:S}=i.useContext(j.QO),T=k("affix",a),[L,R]=i.useState(!1),[E,P]=i.useState(),[D,I]=i.useState(),O=i.useRef(0),B=i.useRef(null),M=i.useRef(null),_=i.useRef(null),z=i.useRef(null),F=i.useRef(null),G=null!==(l=null!==u&&void 0!==u?u:S)&&void 0!==l?l:C,H=void 0===r&&void 0===n?0:n,Z=()=>{O.current=1,(()=>{if(1!==O.current||!z.current||!_.current||!G)return;const e=G();if(e){const t={status:0},l=y(_.current);if(0===l.top&&0===l.left&&0===l.width&&0===l.height)return;const s=y(e),i=b(l,s,H),n=A(l,s,r);void 0!==i?(t.affixStyle={position:"fixed",top:i,width:l.width,height:l.height},t.placeholderStyle={width:l.width,height:l.height}):void 0!==n&&(t.affixStyle={position:"fixed",bottom:n,width:l.width,height:l.height},t.placeholderStyle={width:l.width,height:l.height}),t.lastAffix=!!t.affixStyle,L!==t.lastAffix&&(null===x||void 0===x||x(t.lastAffix)),O.current=t.status,P(t.affixStyle),I(t.placeholderStyle),R(t.lastAffix)}})()},U=v((()=>{Z()})),W=v((()=>{if(G&&E){const e=G();if(e&&_.current){const t=y(e),l=y(_.current),s=b(l,t,H),i=A(l,t,r);if(void 0!==s&&E.top===s||void 0!==i&&E.bottom===i)return}}Z()})),q=()=>{const e=null===G||void 0===G?void 0:G();e&&(N.forEach((t=>{var l;M.current&&(null===(l=B.current)||void 0===l||l.removeEventListener(t,M.current)),null===e||void 0===e||e.addEventListener(t,W)})),B.current=e,M.current=W)},Q=()=>{F.current&&(clearTimeout(F.current),F.current=null);const e=null===G||void 0===G?void 0:G();N.forEach((t=>{var l;null===e||void 0===e||e.removeEventListener(t,W),M.current&&(null===(l=B.current)||void 0===l||l.removeEventListener(t,M.current))})),U.cancel(),W.cancel()};i.useImperativeHandle(t,(()=>({updatePosition:U}))),i.useEffect((()=>(F.current=setTimeout(q),()=>Q())),[]),i.useEffect((()=>(q(),()=>Q())),[u,E,L,n,r]),i.useEffect((()=>{U()}),[u,n,r]);const[$,J,K]=g(T),V=h()(c,J,T,K),X=h()({[V]:E});return $(i.createElement(f.A,{onResize:U},i.createElement("div",Object.assign({style:s,className:o,ref:_},p),E&&i.createElement("div",{style:D,"aria-hidden":"true"}),i.createElement("div",{className:X,ref:z,style:E},i.createElement(f.A,{onResize:U},d)))))}));var S=l(23072),T=l(83390);const L=()=>{const e=(0,c.useAppSelector)((e=>e.playlist.view));return(0,d.jsx)(T.Ay,{view:e,fields:[T.eR.Index,T.eR.Title,T.eR.Album,T.eR.Space,T.eR.Time,T.eR.Space]})},R=(0,i.memo)((e=>{const t=(0,c.useAppSelector)((e=>e.profile.songs)),l=t.length>0;return(0,d.jsxs)("div",{children:[l?(0,d.jsx)("div",{className:"playlist-table",children:(0,d.jsx)(k,{target:()=>e.container.current,children:(0,d.jsx)(L,{})})}):(0,d.jsx)(S.A,{}),l?(0,d.jsx)("div",{style:{paddingBottom:30},children:(0,d.jsx)("div",{children:t.map(((e,t)=>(0,d.jsx)(u,{song:e,index:t},e.id)))})}):null]})}));var E=l(84064),P=l(67818);const D=(0,i.memo)((e=>{const[t]=(0,P.Bd)(["profile"]);return(0,c.useAppSelector)((e=>e.profile.songs))?(0,d.jsxs)("div",{children:[(0,d.jsx)(E.A,{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"playlist-header",children:t("Top tracks this month")}),(0,d.jsx)("h2",{className:"playlist-subheader",children:t("Only visible to you")})]})}),(0,d.jsx)(R,(0,s.A)({},e))]}):null})),I=e=>(0,d.jsx)(n.A,{gutter:[16,16],style:{margin:20,marginTop:30},children:(0,d.jsx)(r.A,{span:24,children:(0,d.jsx)(D,(0,s.A)({},e))})});var O=l(92994);const B=(0,i.memo)((e=>{const t=(0,O.Zp)(),l=(0,c.useAppDispatch)(),n=(0,O.g)(),r=(0,c.useAppSelector)((e=>e.auth.user));return(0,i.useEffect)((()=>{n.userId&&(r.id===n.userId?l(o.h.fetchMyTracks()):t("/users/".concat(n.userId)))}),[r,n.userId,l,t]),(0,d.jsx)(I,(0,s.A)({},e))})),M=B}}]);