/*! For license information please see 144.5065e54d.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkpersonal_music_player=self.webpackChunkpersonal_music_player||[]).push([[144],{83390:(e,t,s)=>{s.d(t,{Ay:()=>r,eR:()=>a});var l=s(67818),n=s(9950),i=s(33767),o=s(44414);const r=(0,n.memo)((e=>{const{view:t,fields:s}=e,l="LIST"===t;return(0,o.jsx)("div",{style:{color:"#bababa"},className:"mobile-hidden flex justify-between items-center py-2",children:s.map(((e,t)=>(0,o.jsx)(e,{isList:l},t)))})})),a={Index:e=>(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsx)("h3",{className:"column-name text-center",children:"#"})}),Title:e=>{const{t:t}=(0,l.Bd)(["playlist"]);return(0,o.jsx)("div",{style:{flex:8},children:(0,o.jsx)("h3",{className:"column-name text-left",children:t("Title")})})},Artists:e=>{const{isList:t}=e,{t:s}=(0,l.Bd)(["playlist"]);return t?null:(0,o.jsx)("div",{style:{flex:5},className:"tablet-hidden",children:(0,o.jsx)("h3",{className:"column-name text-left",children:s("Artist")})})},Time:e=>(0,o.jsx)("div",{style:{flex:1,display:"flex",justifyContent:"flex-end"},children:(0,o.jsx)("h3",{style:{marginRight:10,textAlign:"right"},children:(0,o.jsx)(i.zD,{})})}),Space:e=>(0,o.jsx)("div",{style:{flex:1},className:"tablet-hidden"}),Album:e=>{const{t:t}=(0,l.Bd)(["playlist"]);return(0,o.jsx)("div",{style:{flex:5},children:(0,o.jsx)("h3",{className:"column-name tablet-hidden text-left",children:t("Album")})})},DateAdded:e=>{const{t:t}=(0,l.Bd)(["playlist"]);return(0,o.jsx)("div",{style:{flex:3},children:(0,o.jsx)("h3",{className:"column-name tablet-hidden text-left",children:t("Date Added")})})}}},30797:(e,t,s)=>{s.d(t,{Ay:()=>A,jh:()=>T});var l=s(89379),n=s(22748),i=s(13417),o=s(9950),r=s(33767),a=s(73028),c=s(17858),d=s(67818),u=s(28472),h=s(92994),p=s(53455),m=s(23726),v=s(28504),x=s(2287),f=s(22567),g=s(50411),y=s(26359),j=s(44414);const b=e=>e.slice(0,3).map(((t,s)=>(0,j.jsxs)("span",{children:[(0,j.jsx)(m.k,{artist:t,trigger:["contextMenu"],children:(0,j.jsx)(h.N_,{to:"/artist/".concat(t.id),style:{cursor:"pointer"},children:t.name},t.id)}),s<e.slice(0,3).length-1?", ":""]},t.id))),w=e=>{var t,s,l,n,i;let{song:o,isList:r}=e;if(!r)return null;return(null===(t=((null===o||void 0===o||null===(s=o.album)||void 0===s?void 0:s.images)||[])[0])||void 0===t?void 0:t.url)?(0,j.jsx)("img",{alt:"song cover",src:(null===(l=o.album)||void 0===l||null===(n=l.images)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.url)||"/images/playlist.png",className:"w-10 h-10 mr-4 rounded-md"}):null},S=e=>{let{index:t,isCurrent:s,isPlaying:l,onClick:n}=e;return(0,j.jsxs)("div",{style:{flex:1},className:"mobile-hidden",children:[(0,j.jsx)("p",{className:"song-details-index",children:s&&l?(0,j.jsx)("img",{alt:"equaliser",style:{height:10,margin:"0 auto"},src:g.GD}):(0,j.jsx)("span",{style:{margin:"0 auto"},children:t+1})}),(0,j.jsx)("button",{className:"song-details-play",onClick:n,children:s&&l?(0,j.jsx)(r.vR,{}):(0,j.jsx)(r.jG,{})})]})},A=e=>{var t;const{size:s="normal"}=e,{view:n,song:i,index:r,context:c,artist:d,playlist:h,canEdit:m,fields:v,album:x}=e,g=(0,f.A)(),b=(0,u.useAppDispatch)(),w=(0,u.useAppSelector)((e=>!!e.auth.user)),A=(0,u.useAppSelector)((e=>{var t;return!(null===(t=e.spotify.state)||void 0===t||!t.paused)})),T=(0,u.useAppSelector)((e=>{var t;return null===(t=e.spotify.state)||void 0===t?void 0:t.track_window.current_track}),((e,t)=>(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id))),N=(0,o.useMemo)((()=>(null===T||void 0===T?void 0:T.uri)===i.uri),[T,i]),L="LIST"===(g?"LIST":n),k=(0,o.useCallback)((()=>w?N&&A?p.D.pausePlayback():N?p.D.startPlayback():p.D.startPlayback(c):b(y.e5.openLoginModal(i.album.images[0].url))),[w,N,A,c,b,null===(t=i.album)||void 0===t?void 0:t.images]);return(0,j.jsx)(a.C,{track:i,album:x,artist:d,canEdit:m,playlist:h,trigger:["contextMenu"],saved:e.onToggleLike?e.saved:void 0,onSavedToggle:e.onToggleLike?e.onToggleLike:void 0,children:(0,j.jsx)("button",{onClick:g?k:void 0,onDoubleClick:g?void 0:k,className:"flex flex-col w-full hover:bg-spotify-gray-lightest items-center ".concat("normal"===s?"p-2":""," rounded-lg ").concat(e.activable?"activable-song":""),children:(0,j.jsx)("div",{className:"song-details flex flex-row items-center w-full",children:(0,j.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[void 0!==r?(0,j.jsx)(S,{index:r,isCurrent:N,isPlaying:A,onClick:k}):null,v.map(((t,s)=>(0,j.jsx)(t,(0,l.A)({isList:L,onPlay:k,isCurrent:N,isPlaying:A},e),s)))]})})})},i.id)},T={Title:e=>{const{song:t,isList:s,isCurrent:l}=e;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"flex flex-col",style:{flex:8},children:(0,j.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,j.jsx)("div",{className:"flex flex-row items-center",children:(0,j.jsxs)("p",{className:"title text-left ".concat(l?"active":""),children:[(0,j.jsx)("span",{children:t.name})," ",t.explicit&&!s?(0,j.jsx)("span",{className:"explicit",children:"E"}):null]})}),s?(0,j.jsxs)("p",{className:"text-left artist mobile-hidden",children:[t.explicit?(0,j.jsx)("span",{className:"explicit",children:"E"}):null,b(t.artists)]}):null]})})})})},ClickeableCover:e=>{var t,s;const{song:l,onPlay:n,isCurrent:i,isPlaying:o}=e,a=(0,j.jsx)("button",{className:"image-button",onClick:n,children:o&&i?(0,j.jsx)(r.vR,{}):(0,j.jsx)(r.jG,{})}),c=null===(t=((null===l||void 0===l||null===(s=l.album)||void 0===s?void 0:s.images)||[])[0])||void 0===t?void 0:t.url;return c?(0,j.jsx)("div",{className:"image p-2 h-full items-center",children:(0,j.jsxs)("div",{style:{position:"relative"},children:[(0,j.jsx)("div",{children:(0,j.jsx)("img",{src:c,alt:l.album.name,className:"rounded-md",style:{width:40,height:40}})}),a]})}):null},TitleWithCover:e=>{const{song:t,isList:s,isCurrent:n}=e;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"flex flex-col",style:{flex:8},children:(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,j.jsx)(w,(0,l.A)({},e)),(0,j.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,j.jsx)("div",{className:"flex flex-row items-center",children:(0,j.jsxs)("p",{className:"title text-left ".concat(n?"active":""),children:[(0,j.jsx)("span",{children:t.name})," ",t.explicit&&!s?(0,j.jsx)("span",{className:"explicit",children:"E"}):null]})}),s?(0,j.jsxs)("p",{className:"text-left artist mobile-hidden",children:[t.explicit?(0,j.jsx)("span",{className:"explicit",children:"E"}):null,(0,j.jsx)("div",{children:b(t.artists)})]}):null]})]})})})},Artists:e=>{let{song:t,isList:s}=e;return s?null:(0,j.jsx)("p",{className:"text-left tablet-hidden",style:{flex:5},children:b(t.artists)})},Cover:w,Album:e=>{let{song:t}=e;const s=(0,h.Zp)(),l=(0,u.useAppDispatch)(),n=(0,u.useAppSelector)((e=>!!e.auth.user)),i=(0,o.useCallback)((e=>{if(e&&e.stopPropagation(),e&&e.preventDefault(),!n)return l(y.e5.openLoginModal(t.album.images[0].url));s("/album/".concat(t.album.id))}),[n,s,t.album.id,t.album.images,l]);return(0,j.jsx)("p",{className:"text-left tablet-hidden",style:{flex:5},children:(0,j.jsx)(h.N_,{to:"/album/".concat(t.album.id),onClick:i,children:t.album.name})})},AddedAt:e=>{let{addedAt:t}=e;const s=(0,u.useAppSelector)((e=>e.language.language));return t?(0,j.jsx)("p",{className:"text-left tablet-hidden",style:{flex:3},children:(0,j.jsx)(i.A,{date:new Date(t),locale:"es"===s?"es-AR":void 0})}):null},AddToLiked:e=>{let{song:t,saved:s,onLikeRefresh:l}=e;const n=(0,u.useAppDispatch)(),i=(0,u.useAppSelector)((e=>{var t;return null===(t=e.spotify.state)||void 0===t?void 0:t.track_window.current_track.id}));return(0,j.jsx)("p",{className:"text-right tablet-hidden",style:{flex:1,display:"flex",justifyContent:"end"},children:(0,j.jsx)(v.$,{size:18,id:t.id,isSaved:!!s,onToggle:()=>{l&&l(t.id),i===t.id&&n(x.gj.setLiked({liked:!s}))}})})},Actions:e=>{let{song:t}=e;const[s]=(0,d.Bd)(["order"]);return(0,j.jsx)("p",{className:"text-right actions tablet-hidden",style:{flex:1,display:"flex",justifyContent:"center"},children:(0,j.jsx)(a.C,{track:t,trigger:["click"],children:(0,j.jsx)("div",{children:(0,j.jsx)(n.A,{title:"".concat(s("More options for")," ").concat(t.name),children:(0,j.jsx)("div",{children:(0,j.jsx)(r.ZB,{})})})})})})},Time:e=>{let{song:t}=e;return(0,j.jsx)("p",{className:"text-right ",style:{flex:1,display:"flex",justifyContent:"end"},children:(0,c.n)(t.duration_ms)})}}},60144:(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var l=s(23072),n=s(89379),i=s(30797),o=s(28472),r=s(92696),a=s(44414);const c=e=>{const{song:t,index:s}=e,l=(0,o.useAppDispatch)(),c=(0,o.useAppSelector)((e=>e.auth.user)),d=(0,o.useAppSelector)((e=>e.playlist.view)),u=(0,o.useAppSelector)((e=>e.playlist.playlist));return(0,a.jsx)(i.Ay,{activable:!0,view:d,saved:!0,index:s,song:t.track,playlist:u,addedAt:t.added_at,context:{context_uri:"spotify:user:".concat(null===c||void 0===c?void 0:c.id,":collection"),offset:{position:s}},fields:[i.jh.TitleWithCover,i.jh.Artists,i.jh.Album,i.jh.AddedAt,e=>(0,a.jsx)(i.jh.AddToLiked,(0,n.A)((0,n.A)({},e),{},{onLikeRefresh:()=>{l(r.NL.removeSong({id:t.track.id}))}})),i.jh.Time,i.jh.Actions]})};var d=s(83390);const u=()=>{const e=(0,o.useAppSelector)((e=>e.playlist.view));return(0,a.jsx)(d.Ay,{view:e,fields:[d.eR.Index,d.eR.Title,d.eR.Artists,d.eR.Album,d.eR.DateAdded,d.eR.Space,d.eR.Time,d.eR.Space]})};var h=s(87094),p=s(41988),m=s(45259),v=s(99650),x=s(9950);const f=(0,x.memo)((e=>{let{size:t=30}=e;const s=(0,o.useAppSelector)((e=>e.auth.user)),l=(0,o.useAppSelector)((e=>!!e.likedSongs.items.length)),n=(0,o.useAppSelector)((e=>{var t;return null===(t=e.spotify.state)||void 0===t?void 0:t.context.uri})),i=(0,x.useMemo)((()=>n==="spotify:user:".concat(null===s||void 0===s?void 0:s.id,":collection")),[n,null===s||void 0===s?void 0:s.id]);return l?(0,a.jsx)(v.N,{size:t,big:t>=30,isCurrent:i,context:{context_uri:"spotify:user:".concat(null===s||void 0===s?void 0:s.id,":collection")}}):null})),g=()=>(0,a.jsx)("div",{className:"playlist-controls",children:(0,a.jsx)(h.A,{justify:"space-between",align:"middle",children:(0,a.jsx)(p.A,{children:(0,a.jsx)(m.A,{align:"center",children:(0,a.jsx)(f,{})})})})});var y=s(50411),j=s(50416);const b=(0,x.memo)((e=>{let{color:t}=e;const s=(0,o.useAppDispatch)(),n=(0,o.useAppSelector)((e=>e.likedSongs.total)),i=(0,o.useAppSelector)((e=>e.likedSongs.items));return(0,a.jsxs)("div",{className:"playlist-list",style:{maxHeight:323,background:"linear-gradient(".concat(t," -50%, ").concat(y.yi," 90%)")},children:[(0,a.jsx)(g,{}),n?(0,a.jsx)("div",{className:"playlist-table",children:(0,a.jsx)(u,{})}):(0,a.jsx)(l.A,{}),(0,a.jsx)(j.A,{loader:null,scrollThreshold:.5,dataLength:i.length,next:()=>{s(r.NL.fetchMore())},hasMore:i.length<n,children:n?(0,a.jsx)("div",{style:{paddingBottom:30},children:i.map(((e,t)=>(0,a.jsx)(c,{song:e,index:t},"".concat(e.added_at,"-").concat(e.track.id))))}):null})]})}));var w=s(92994),S=s(67818),A=s(88476),T=s(26359);const N=e=>{var t,s,l,n;let{container:i,color:r,sectionContainer:c}=e;const{t:d}=(0,S.Bd)(["playlist"]),v=(0,o.useAppSelector)((e=>e.auth.user)),g=(0,o.useAppSelector)((e=>e.likedSongs.total)),[j,b]=(0,x.useState)(0),[N,L]=(0,x.useState)(!1),[k,E]=(0,x.useState)(!1),D=(0,o.useAppSelector)(T.Nl),C=(0,o.useAppSelector)((e=>e.ui.libraryCollapsed));return(0,x.useEffect)((()=>{const e=i.current,t=()=>{e&&(L(e.scrollTop>260),E(e.scrollTop>320))};return null===e||void 0===e||e.addEventListener("scroll",t),()=>{window.onresize=null,null===e||void 0===e||e.removeEventListener("scroll",t)}}),[i]),(0,x.useEffect)((()=>{const e=null===c||void 0===c?void 0:c.current;if(e){const t=new ResizeObserver((e=>{b(e[0].contentRect.width)}));return t.observe(e),()=>e&&t.unobserve(e)}}),[c,D,C]),(0,a.jsxs)("div",{style:{overflow:"auto",position:"relative",background:"linear-gradient(180deg, transparent 0px, ".concat(r,' 100%), url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIGJhc2VGcmVxdWVuY3k9Ii43NSIgc3RpdGNoVGlsZXM9InN0aXRjaCIgdHlwZT0iZnJhY3RhbE5vaXNlIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGQ9Ik0wIDBoMzAwdjMwMEgweiIgZmlsdGVyPSJ1cmwoI2EpIiBvcGFjaXR5PSIuMDUiLz48L3N2Zz4=")')},children:[(0,a.jsxs)("div",{className:"nav-header ".concat(N?"active":""),style:{width:j,opacity:N?1:0,backgroundColor:N?(0,A.A)(r).darken(10).toRgbString():"transparent"},children:[(0,a.jsxs)(m.A,{children:[(0,a.jsx)(f,{size:20}),(0,a.jsx)("h1",{className:"nav-header-playlist-title",children:d("Liked Songs")})]}),(0,a.jsx)("div",{style:{padding:"0px 20px",opacity:k?1:0},className:"nav-bar-header-table-container ".concat(k?"active":""),children:(0,a.jsx)(u,{})})]}),(0,a.jsx)("div",{style:{padding:30,paddingTop:30},children:(0,a.jsxs)(h.A,{gutter:[24,24],align:"middle",children:[(0,a.jsx)(p.A,{xs:24,sm:6,lg:5,children:(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:y.ty,alt:"liked songs images",className:"playlist-img"})})}),(0,a.jsx)(p.A,{xs:24,sm:18,lg:19,children:(0,a.jsxs)(h.A,{justify:"space-between",children:[(0,a.jsxs)(p.A,{span:24,children:[(0,a.jsx)("p",{className:"text-white",children:d("Playlist")}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"playlist-title",children:d("Liked Songs")})})]}),(0,a.jsx)(p.A,{span:24,children:(0,a.jsxs)(m.A,{className:"owner",children:[null!==v&&void 0!==v&&null!==(t=v.images)&&void 0!==t&&null!==(s=t[0])&&void 0!==s&&s.url?(0,a.jsx)(w.N_,{to:"/profile",children:(0,a.jsx)("img",{id:"user-avatar",alt:"User Avatar",src:null===v||void 0===v||null===(l=v.images)||void 0===l||null===(n=l[0])||void 0===n?void 0:n.url,className:"playlist-avatar"})}):null,(0,a.jsxs)("h3",{className:"text-sm font-semibold text-white",children:[(0,a.jsx)(w.N_,{to:"/",className:"link-text",children:null===v||void 0===v?void 0:v.display_name}),(0,a.jsx)("span",{className:"songs-number",children:g?" \u2022 ".concat(g," ").concat(d(1===g?"song":"songs")):" "})]})]})})]})})]})})]})};var L=s(21812);const k=e=>{const t=(0,o.useAppDispatch)(),s=(0,x.useRef)(null),[l,n]=(0,x.useState)(y.yi);return(0,x.useEffect)((()=>{(0,L.W)(y.ty).then((e=>{const t=(0,A.A)(e);n(t.isLight()?t.darken(10).toHexString():t.toHexString())})),t(r.NL.fetchLikeSongs())}),[t]),(0,a.jsxs)("div",{className:"Playlist-section",ref:s,children:[(0,a.jsx)(N,{color:l,container:e.container,sectionContainer:s}),(0,a.jsx)(b,{color:l})]})};k.displayName="LikedSongsPage";const E=k},50416:(e,t,s)=>{s.d(t,{A:()=>d});var l=s(9950),n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])},n(e,t)};var i=function(){return i=Object.assign||function(e){for(var t,s=1,l=arguments.length;s<l;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)};var o="Pixel",r="Percent",a={unit:r,value:.8};function c(e){return"number"===typeof e?{unit:r,value:100*e}:"string"===typeof e?e.match(/^(\d*(\.\d+)?)px$/)?{unit:o,value:parseFloat(e)}:e.match(/^(\d*(\.\d+)?)%$/)?{unit:r,value:parseFloat(e)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),a):(console.warn("scrollThreshold should be string or number"),a)}const d=function(e){function t(t){var s=e.call(this,t)||this;return s.lastScrollTop=0,s.actionTriggered=!1,s.startY=0,s.currentY=0,s.dragging=!1,s.maxPullDownDistance=0,s.getScrollableTarget=function(){return s.props.scrollableTarget instanceof HTMLElement?s.props.scrollableTarget:"string"===typeof s.props.scrollableTarget?document.getElementById(s.props.scrollableTarget):(null===s.props.scrollableTarget&&console.warn("You are trying to pass scrollableTarget but it is null. This might\n        happen because the element may not have been added to DOM yet.\n        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.\n      "),null)},s.onStart=function(e){s.lastScrollTop||(s.dragging=!0,e instanceof MouseEvent?s.startY=e.pageY:e instanceof TouchEvent&&(s.startY=e.touches[0].pageY),s.currentY=s.startY,s._infScroll&&(s._infScroll.style.willChange="transform",s._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},s.onMove=function(e){s.dragging&&(e instanceof MouseEvent?s.currentY=e.pageY:e instanceof TouchEvent&&(s.currentY=e.touches[0].pageY),s.currentY<s.startY||(s.currentY-s.startY>=Number(s.props.pullDownToRefreshThreshold)&&s.setState({pullToRefreshThresholdBreached:!0}),s.currentY-s.startY>1.5*s.maxPullDownDistance||s._infScroll&&(s._infScroll.style.overflow="visible",s._infScroll.style.transform="translate3d(0px, "+(s.currentY-s.startY)+"px, 0px)")))},s.onEnd=function(){s.startY=0,s.currentY=0,s.dragging=!1,s.state.pullToRefreshThresholdBreached&&(s.props.refreshFunction&&s.props.refreshFunction(),s.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame((function(){s._infScroll&&(s._infScroll.style.overflow="auto",s._infScroll.style.transform="none",s._infScroll.style.willChange="unset")}))},s.onScrollListener=function(e){"function"===typeof s.props.onScroll&&setTimeout((function(){return s.props.onScroll&&s.props.onScroll(e)}),0);var t=s.props.height||s._scrollableNode?e.target:document.documentElement.scrollTop?document.documentElement:document.body;s.actionTriggered||((s.props.inverse?s.isElementAtTop(t,s.props.scrollThreshold):s.isElementAtBottom(t,s.props.scrollThreshold))&&s.props.hasMore&&(s.actionTriggered=!0,s.setState({showLoader:!0}),s.props.next&&s.props.next()),s.lastScrollTop=t.scrollTop)},s.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:t.dataLength},s.throttledOnScrollListener=function(e,t,s,l){var n,i=!1,o=0;function r(){n&&clearTimeout(n)}function a(){var a=this,c=Date.now()-o,d=arguments;function u(){o=Date.now(),s.apply(a,d)}i||(l&&!n&&u(),r(),void 0===l&&c>e?u():!0!==t&&(n=setTimeout(l?function(){n=void 0}:u,void 0===l?e-c:e)))}return"boolean"!==typeof t&&(l=s,s=t,t=void 0),a.cancel=function(){r(),i=!0},a}(150,s.onScrollListener).bind(s),s.onStart=s.onStart.bind(s),s.onMove=s.onMove.bind(s),s.onEnd=s.onEnd.bind(s),s}return function(e,t){function s(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}(t,e),t.prototype.componentDidMount=function(){if("undefined"===typeof this.props.dataLength)throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),"number"===typeof this.props.initialScrollY&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),"function"!==typeof this.props.refreshFunction))throw new Error('Mandatory prop "refreshFunction" missing.\n          Pull Down To Refresh functionality will not work\n          as expected. Check README.md for usage\'')},t.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},t.prototype.componentDidUpdate=function(e){this.props.dataLength!==e.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},t.getDerivedStateFromProps=function(e,t){return e.dataLength!==t.prevDataLength?i(i({},t),{prevDataLength:e.dataLength}):null},t.prototype.isElementAtTop=function(e,t){void 0===t&&(t=.8);var s=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,l=c(t);return l.unit===o?e.scrollTop<=l.value+s-e.scrollHeight+1:e.scrollTop<=l.value/100+s-e.scrollHeight+1},t.prototype.isElementAtBottom=function(e,t){void 0===t&&(t=.8);var s=e===document.body||e===document.documentElement?window.screen.availHeight:e.clientHeight,l=c(t);return l.unit===o?e.scrollTop+s>=e.scrollHeight-l.value:e.scrollTop+s>=l.value/100*e.scrollHeight},t.prototype.render=function(){var e=this,t=i({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),s=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),n=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return l.createElement("div",{style:n,className:"infinite-scroll-component__outerdiv"},l.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(t){return e._infScroll=t},style:t},this.props.pullDownToRefresh&&l.createElement("div",{style:{position:"relative"},ref:function(t){return e._pullDown=t}},l.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!s&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},t}(l.Component)}}]);