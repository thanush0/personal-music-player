"use strict";(self.webpackChunkpersonal_music_player=self.webpackChunkpersonal_music_player||[]).push([[556],{30797:(e,s,l)=>{l.d(s,{Ay:()=>k,jh:()=>C});var i=l(89379),t=l(22748),n=l(13417),r=l(9950),a=l(33767),o=l(73028),c=l(17858),d=l(67818),u=l(28472),x=l(92994),p=l(53455),h=l(23726),m=l(28504),v=l(2287),j=l(22567),g=l(50411),f=l(26359),y=l(44414);const b=e=>e.slice(0,3).map(((s,l)=>(0,y.jsxs)("span",{children:[(0,y.jsx)(h.k,{artist:s,trigger:["contextMenu"],children:(0,y.jsx)(x.N_,{to:"/artist/".concat(s.id),style:{cursor:"pointer"},children:s.name},s.id)}),l<e.slice(0,3).length-1?", ":""]},s.id))),A=e=>{var s,l,i,t,n;let{song:r,isList:a}=e;if(!a)return null;return(null===(s=((null===r||void 0===r||null===(l=r.album)||void 0===l?void 0:l.images)||[])[0])||void 0===s?void 0:s.url)?(0,y.jsx)("img",{alt:"song cover",src:(null===(i=r.album)||void 0===i||null===(t=i.images)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url)||"/images/playlist.png",className:"w-10 h-10 mr-4 rounded-md"}):null},N=e=>{let{index:s,isCurrent:l,isPlaying:i,onClick:t}=e;return(0,y.jsxs)("div",{style:{flex:1},className:"mobile-hidden",children:[(0,y.jsx)("p",{className:"song-details-index",children:l&&i?(0,y.jsx)("img",{alt:"equaliser",style:{height:10,margin:"0 auto"},src:g.GD}):(0,y.jsx)("span",{style:{margin:"0 auto"},children:s+1})}),(0,y.jsx)("button",{className:"song-details-play",onClick:t,children:l&&i?(0,y.jsx)(a.vR,{}):(0,y.jsx)(a.jG,{})})]})},k=e=>{var s;const{size:l="normal"}=e,{view:t,song:n,index:a,context:c,artist:d,playlist:x,canEdit:h,fields:m,album:v}=e,g=(0,j.A)(),b=(0,u.useAppDispatch)(),A=(0,u.useAppSelector)((e=>!!e.auth.user)),k=(0,u.useAppSelector)((e=>{var s;return!(null===(s=e.spotify.state)||void 0===s||!s.paused)})),C=(0,u.useAppSelector)((e=>{var s;return null===(s=e.spotify.state)||void 0===s?void 0:s.track_window.current_track}),((e,s)=>(null===e||void 0===e?void 0:e.id)===(null===s||void 0===s?void 0:s.id))),S=(0,r.useMemo)((()=>(null===C||void 0===C?void 0:C.uri)===n.uri),[C,n]),w="LIST"===(g?"LIST":t),L=(0,r.useCallback)((()=>A?S&&k?p.D.pausePlayback():S?p.D.startPlayback():p.D.startPlayback(c):b(f.e5.openLoginModal(n.album.images[0].url))),[A,S,k,c,b,null===(s=n.album)||void 0===s?void 0:s.images]);return(0,y.jsx)(o.C,{track:n,album:v,artist:d,canEdit:h,playlist:x,trigger:["contextMenu"],saved:e.onToggleLike?e.saved:void 0,onSavedToggle:e.onToggleLike?e.onToggleLike:void 0,children:(0,y.jsx)("button",{onClick:g?L:void 0,onDoubleClick:g?void 0:L,className:"flex flex-col w-full hover:bg-spotify-gray-lightest items-center ".concat("normal"===l?"p-2":""," rounded-lg ").concat(e.activable?"activable-song":""),children:(0,y.jsx)("div",{className:"song-details flex flex-row items-center w-full",children:(0,y.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[void 0!==a?(0,y.jsx)(N,{index:a,isCurrent:S,isPlaying:k,onClick:L}):null,m.map(((s,l)=>(0,y.jsx)(s,(0,i.A)({isList:w,onPlay:L,isCurrent:S,isPlaying:k},e),l)))]})})})},n.id)},C={Title:e=>{const{song:s,isList:l,isCurrent:i}=e;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"flex flex-col",style:{flex:8},children:(0,y.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,y.jsx)("div",{className:"flex flex-row items-center",children:(0,y.jsxs)("p",{className:"title text-left ".concat(i?"active":""),children:[(0,y.jsx)("span",{children:s.name})," ",s.explicit&&!l?(0,y.jsx)("span",{className:"explicit",children:"E"}):null]})}),l?(0,y.jsxs)("p",{className:"text-left artist mobile-hidden",children:[s.explicit?(0,y.jsx)("span",{className:"explicit",children:"E"}):null,b(s.artists)]}):null]})})})})},ClickeableCover:e=>{var s,l;const{song:i,onPlay:t,isCurrent:n,isPlaying:r}=e,o=(0,y.jsx)("button",{className:"image-button",onClick:t,children:r&&n?(0,y.jsx)(a.vR,{}):(0,y.jsx)(a.jG,{})}),c=null===(s=((null===i||void 0===i||null===(l=i.album)||void 0===l?void 0:l.images)||[])[0])||void 0===s?void 0:s.url;return c?(0,y.jsx)("div",{className:"image p-2 h-full items-center",children:(0,y.jsxs)("div",{style:{position:"relative"},children:[(0,y.jsx)("div",{children:(0,y.jsx)("img",{src:c,alt:i.album.name,className:"rounded-md",style:{width:40,height:40}})}),o]})}):null},TitleWithCover:e=>{const{song:s,isList:l,isCurrent:t}=e;return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)("div",{className:"flex flex-col",style:{flex:8},children:(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,y.jsx)(A,(0,i.A)({},e)),(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,y.jsx)("div",{className:"flex flex-row items-center",children:(0,y.jsxs)("p",{className:"title text-left ".concat(t?"active":""),children:[(0,y.jsx)("span",{children:s.name})," ",s.explicit&&!l?(0,y.jsx)("span",{className:"explicit",children:"E"}):null]})}),l?(0,y.jsxs)("p",{className:"text-left artist mobile-hidden",children:[s.explicit?(0,y.jsx)("span",{className:"explicit",children:"E"}):null,(0,y.jsx)("div",{children:b(s.artists)})]}):null]})]})})})},Artists:e=>{let{song:s,isList:l}=e;return l?null:(0,y.jsx)("p",{className:"text-left tablet-hidden",style:{flex:5},children:b(s.artists)})},Cover:A,Album:e=>{let{song:s}=e;const l=(0,x.Zp)(),i=(0,u.useAppDispatch)(),t=(0,u.useAppSelector)((e=>!!e.auth.user)),n=(0,r.useCallback)((e=>{if(e&&e.stopPropagation(),e&&e.preventDefault(),!t)return i(f.e5.openLoginModal(s.album.images[0].url));l("/album/".concat(s.album.id))}),[t,l,s.album.id,s.album.images,i]);return(0,y.jsx)("p",{className:"text-left tablet-hidden",style:{flex:5},children:(0,y.jsx)(x.N_,{to:"/album/".concat(s.album.id),onClick:n,children:s.album.name})})},AddedAt:e=>{let{addedAt:s}=e;const l=(0,u.useAppSelector)((e=>e.language.language));return s?(0,y.jsx)("p",{className:"text-left tablet-hidden",style:{flex:3},children:(0,y.jsx)(n.A,{date:new Date(s),locale:"es"===l?"es-AR":void 0})}):null},AddToLiked:e=>{let{song:s,saved:l,onLikeRefresh:i}=e;const t=(0,u.useAppDispatch)(),n=(0,u.useAppSelector)((e=>{var s;return null===(s=e.spotify.state)||void 0===s?void 0:s.track_window.current_track.id}));return(0,y.jsx)("p",{className:"text-right tablet-hidden",style:{flex:1,display:"flex",justifyContent:"end"},children:(0,y.jsx)(m.$,{size:18,id:s.id,isSaved:!!l,onToggle:()=>{i&&i(s.id),n===s.id&&t(v.gj.setLiked({liked:!l}))}})})},Actions:e=>{let{song:s}=e;const[l]=(0,d.Bd)(["order"]);return(0,y.jsx)("p",{className:"text-right actions tablet-hidden",style:{flex:1,display:"flex",justifyContent:"center"},children:(0,y.jsx)(o.C,{track:s,trigger:["click"],children:(0,y.jsx)("div",{children:(0,y.jsx)(t.A,{title:"".concat(l("More options for")," ").concat(s.name),children:(0,y.jsx)("div",{children:(0,y.jsx)(a.ZB,{})})})})})})},Time:e=>{let{song:s}=e;return(0,y.jsx)("p",{className:"text-right ",style:{flex:1,display:"flex",justifyContent:"end"},children:(0,c.n)(s.duration_ms)})}}},71556:(e,s,l)=>{l.r(s),l.d(s,{Profile:()=>S,default:()=>w});var i=l(92994),t=l(28472),n=l(9950),r=l(23464),a=l(50411),o=l(89379),c=l(45259),d=l(54400),u=l(44414);const x=(0,n.memo)((e=>{const s=(0,t.useAppSelector)((e=>e.profile.user));return(0,u.jsx)(d.z,(0,o.A)((0,o.A)({},e),{},{hiddenContent:!0,activeHeider:270,activeContentHeight:320,children:(0,u.jsx)(c.A,{children:(0,u.jsx)("h1",{style:{margin:0},className:"playlist-header",children:null===s||void 0===s?void 0:s.display_name})})}))}));var p=l(21812),h=l(88476),m=l(67818);const v=(0,n.memo)((e=>{var s;const{t:l}=(0,m.Bd)(["profile"]),i=(0,t.useAppSelector)((e=>e.profile.user));return(0,u.jsxs)("div",{className:"profile-header",children:[(0,u.jsx)("div",{className:"profile-header-cover",style:{backgroundColor:e.color}}),(0,u.jsx)("div",{className:"profile-header-background"}),(0,u.jsxs)("div",{className:"profile-header-content",children:[(0,u.jsx)("div",{}),(0,u.jsx)("div",{className:"profile-img-container",children:(0,u.jsx)("div",{className:"profile-img",children:(0,u.jsx)("div",{style:{borderRadius:4,height:"100%",width:"100%"},children:(0,u.jsx)("img",{src:null!==i&&void 0!==i&&i.images&&i.images.length?i.images[0].url:a.Xm,alt:null===i||void 0===i?void 0:i.display_name})})})}),(0,u.jsxs)("div",{className:"profile-header-text",children:[(0,u.jsx)("span",{className:"type",children:l("Profile")}),(0,u.jsx)("span",{className:"profile-header-name-container",children:(0,u.jsx)("h1",{children:null===i||void 0===i?void 0:i.display_name})}),(0,u.jsx)("div",{className:"profile-header-details-container",children:(0,u.jsxs)("span",{"data-encore-id":"text",children:[(null===i||void 0===i||null===(s=i.followers)||void 0===s?void 0:s.total)||0," ",l("Followers")]})})]})]})]})}));var j=l(28739),g=l(22567);const f=(0,n.memo)((()=>{const e=(0,g.A)(),[s]=(0,m.Bd)(["profile"]),l=(0,t.useAppSelector)((e=>e.profile.user)),i=(0,t.useAppSelector)((e=>e.profile.artists));return i&&i.length?(0,u.jsx)("div",{children:(0,u.jsx)(j.Sb,{items:i,title:s("Top artists this month"),subtitle:s("Only visible to you"),moreUrl:i.length>(e?2:5)?"/users/".concat(null===l||void 0===l?void 0:l.id,"/artists"):void 0})}):null})),y=(0,n.memo)((()=>{const e=(0,g.A)(),[s]=(0,m.Bd)(["profile"]),l=(0,t.useAppSelector)((e=>e.profile.user)),i=(0,t.useAppSelector)((e=>e.profile.playlists));return i&&i.length?(0,u.jsx)("div",{style:{marginTop:10},children:(0,u.jsx)(j.Sb,{items:i,title:s("Public playlists"),moreUrl:i.length>(e?2:6)?"/users/".concat(l.id,"/playlists"):void 0})}):null}));var b=l(84064),A=l(30797);const N=e=>{const{song:s,index:l}=e,i=(0,t.useAppDispatch)(),a=(0,t.useAppSelector)((e=>e.profile.songs)),c=(0,n.useMemo)((()=>a.slice(l).map((e=>e.uri))),[a,l]),d=(0,n.useCallback)((()=>{i(r.h.setLinkedStateForTrack({id:s.id,saved:!s.saved}))}),[i,s.saved,s.id]);return(0,u.jsx)(A.Ay,{activable:!0,view:"LIST",song:s,index:l,context:{uris:c},saved:s.saved,onToggleLike:d,fields:[A.jh.TitleWithCover,A.jh.Album,e=>(0,u.jsx)(A.jh.AddToLiked,(0,o.A)((0,o.A)({},e),{},{onLikeRefresh:d})),A.jh.Time,A.jh.Actions]})},k=()=>{const{t:e}=(0,m.Bd)(["profile"]),s=(0,t.useAppSelector)((e=>e.profile.user)),l=(0,t.useAppSelector)((e=>e.profile.songs));return l&&0!==l.length?(0,u.jsxs)("div",{className:"search-songs-container",style:{marginTop:10},children:[(0,u.jsxs)(b.A,{align:"center",justify:"space-between",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"playlist-header",children:e("Top tracks this month")}),(0,u.jsx)("h2",{className:"playlist-subheader",children:e("Only visible to you")})]}),l&&l.length>5?(0,u.jsx)("div",{children:(0,u.jsx)(i.N_,{to:"/users/".concat(s.id,"/tracks"),className:"showMore",children:(0,u.jsx)("span",{children:e("See all")})})}):null]}),(0,u.jsx)("div",{children:l.slice(0,5).map(((e,s)=>(0,u.jsx)(N,{song:e,index:s},e.id)))})]}):null},C=e=>{const s=(0,t.useAppSelector)((e=>e.profile.user)),l=(0,n.useRef)(null),[i,r]=(0,n.useState)(a.yi);return(0,n.useEffect)((()=>{var e;s&&null!==(e=s.images)&&void 0!==e&&e.length&&(0,p.W)(s.images[0].url).then((e=>{const s=(0,h.A)(e);for(;s.isLight();)s.darken(10);r(s.darken(20).toString())}))}),[r,s]),(0,u.jsxs)("div",{className:"Profile-section",ref:l,children:[(0,u.jsx)(x,{color:i,container:e.container,sectionContainer:l}),(0,u.jsx)(v,{color:i}),(0,u.jsxs)("div",{style:{maxHeight:323,padding:"20px 15px",background:"linear-gradient(".concat(i," -50%, ").concat(a.yi," 90%)")},children:[(0,u.jsx)(f,{}),(0,u.jsx)(k,{}),(0,u.jsx)(y,{})]})]})},S=e=>{const s=(0,t.useAppDispatch)(),l=(0,i.g)(),a=(0,t.useAppSelector)((e=>e.profile.user));return(0,n.useEffect)((()=>(l.userId&&s(r.h.fetchUser(l.userId)),()=>{s(r.h.removeUser())})),[s,l.userId]),a?(0,u.jsx)(C,{container:e.container}):null},w=S}}]);